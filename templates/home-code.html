<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Home Text</title>

    <!-- Library -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='/lib/fontawesome-free/css/all.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='/lib/icheck-bootstrap/icheck-bootstrap.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='/lib/summernote/summernote-bs4.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='/css/main.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='/css/custom.css') }}"
    />

    <style>
      textarea {
        width: 100%;
        height: 120px;
        padding: 5px;
      }
      input {
        width: 50px;
        margin-left: 10px;
        position: relative;
        bottom: 4px;
        font-size: 1.2rem;
      }
      #similar-btn {
        /* border: none; */
        /* padding: 8px 18px; */
        font-size: 1.5rem;
        margin-left: 10px;
        /* border-radius: 8px; */
      }
      .highlight {
        background-color: yellow;
        display: inline-block;
        font-size: 1.2rem;
        margin-top: 7px;
        padding: 5px 10px;
        border-radius: 7px;
      }
    </style>
  </head>
  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#"
              ><i class="fas fa-bars"></i
            ></a>
          </li>
        </ul>

        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown user-menu">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              <img
                src="{{ url_for('static', filename='/img/MEC.png') }}"
                class="user-image img-circle elevation-2"
              />
              <span class="d-none d-md-inline">Admin</span>
            </a>

            <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <li class="user-header bg-purple">
                <img
                  src="{{ url_for('static', filename='/img/MEC.png') }}"
                  class="img-circle elevation-2"
                  alt="User Image"
                />
                <p>l 
                  Admin - NOOR RANI , salomi angel
                  <small>BTECH-ARTIFICIAL INTELLIGENCE AND DATA SCIENCE </small>
                </p>
              </li>

              <li class="user-footer">
                <a
                  href="#"
                  id="logout"
                  class="btn bg-purple btn-flat float-right"
                  >Sign out</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </nav>

      <aside class="main-sidebar elevation-4 sidebar-light-purple">
        <a href="#" class="brand-link navbar-light">
          <img
            src="{{ url_for('static', filename='/img/product-hunt-brands.svg') }}"
            class="brand-image img-circle elevation-3"
            style="width: 34px"
          />
          <span class="brand-text font-weight-light">Plagiarism Detector</span>
        </a>

        <div class="sidebar">
          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
            >
              <li class="nav-item">
                <a href="/text" class="nav-link">
                  <i class="fas fa-file-word nav-icon"></i>
                  <p>Text</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="/upload" class="nav-link">
                  <i class="fas fa-file-upload nav-icon"></i>
                  <p>Upload</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/meaning" class="nav-link">
                  <i class="fas fa-circle-nodes nav-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M418.4 157.9c35.3-8.3 61.6-40 61.6-77.9c0-44.2-35.8-80-80-80c-43.4 0-78.7 34.5-80 77.5L136.2 151.1C121.7 136.8 101.9 128 80 128c-44.2 0-80 35.8-80 80s35.8 80 80 80c12.2 0 23.8-2.7 34.1-7.6L259.7 407.8c-2.4 7.6-3.7 15.8-3.7 24.2c0 44.2 35.8 80 80 80s80-35.8 80-80c0-27.7-14-52.1-35.4-66.4l37.8-207.7zM156.3 232.2c2.2-6.9 3.5-14.2 3.7-21.7l183.8-73.5c3.6 3.5 7.4 6.7 11.6 9.5L317.6 354.1c-5.5 1.3-10.8 3.1-15.8 5.5L156.3 232.2z"/></svg></i>
                  <p>Meaning</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/code" class="nav-link active">
                  <i class="fas nav-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></i>
                  <p>Code</p>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </aside>

      <div class="content-wrapper">
        <section class="content-header">
          <div class="container-fluid">
            <div class="mb-2">
              <h3>Insert the Code into the editor</h3>
            </div>
          </div>
        </section>

        <section class="content">
          <div class="card">
            <div class="card-body">
              <form id="textForm">
                <h4>Text 1</h4>
                <div class="text_editor_bx mb-4">
                  <textarea id="textEditor1" name="textArea1">def add_numbers(a, b):
        result = a * b
        return result</textarea>
                </div>
                <h4>Text 2</h4>
                <div class="text_editor_bx mb-4">
                  <textarea id="textEditor2" name="textArea2">def add_values(x, y):
        result = x * y
        return result</textarea>
                </div>

                <div class="d-flex justify-content-end">
                  <button type="submit" class="btn bg-purple px-5">
                    Submit
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="card" id="card2" style="display: none">
            <div class="card-body">
              <div id="threshold" style="display: flex; align-items: center">
                <h5 style="position: relative; top: 3px">Is Code are Similar :</h5>
                <div id="similar-btn" style="text-transform: capitalize;"></div>
              </div>
              <div id="card2-2" style="display: none">
                <h5 style="margin-top: 15px">Common Line With Different Varaible Name:</h5>
                <div class="text_editor_bx mb-4" id="result-1"></div>
                <h5 style="margin-top: 15px">Common Line With Same Varaible Name:</h5>
                <div class="text_editor_bx mb-4" id="result-2"></div>
              </div>
              <div style="color:red">
                <h6>'-' : Line That is present in the first code but not in second code</h6>
                <h6>'+' : Line That is present in the second code but not in first code</h6>
                <h6>'*' : Line That is present in the both the code</h6>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <!-- Library -->
    <script src="{{ url_for('static', filename='/lib/jquery/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='/lib/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='/lib/summernote/summernote-bs4.min.js') }}"></script>

    <script src="{{ url_for('static', filename='/js/main.min.js') }}"></script>

    <script>
      $(document).on("click", "#logout", function (e) {
        e.preventDefault();
        location.href = "/";
      });

      const textarea1 = document.getElementById("textEditor1");
      const textarea2 = document.getElementById("textEditor2");
      const result1 = document.getElementById("result-1");
      const result2 = document.getElementById("result-2");
      const similar_btn = document.getElementById("similar-btn");
      const card2 = document.getElementById("card2");
      const card2_2 = document.getElementById("card2-2");

      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("textForm");
        form.addEventListener("submit", function (event) {
          event.preventDefault();
          result1.innerHTML = "";
          const formData = new FormData(form);
          fetch("/code", {
            method: "POST",
            body: formData,
          })
            .then((response) => response.json())
            .then((data) => {
              card2.style.display = "block";
              if(data["is_similar"]){
                  similar_btn.innerHTML = data["is_similar"]
                  for(let i = 0; i < data['similar_line'].length;i++){
                      sign = data['similar_line'][i][0]
                      if(sign == "-" || sign == "+"){
                        card2_2.style.display = "block";
                        result1.innerHTML += data['similar_line'][i] + '<br>'
                    }
                    else{
                        result2.innerHTML += data['similar_line'][i]
                    }
                }
            }
            else{
                similar_btn.innerHTML = data["is_similar"]
              }
            })
            .catch((error) => {
              console.error("Error:", error);
            });
        });
      });
    </script>
  </body>
</html>
